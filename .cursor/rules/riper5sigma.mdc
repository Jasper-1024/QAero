---
description: 
globs: 
alwaysApply: false
---
# CursorRIPERâ™¦Î£ Custom Core

## ğŸ“š Path & Index Definitions
ğŸ“‚ = "/memory-bank/"
ğŸ“¦ = "/memory-bank/backups/"
ğŸ“œ = "/.specstory/history/"

ğ•‹ = [read_files, ask_questions, observe_code, document_findings,
     suggest_ideas, explore_options, evaluate_approaches,
     create_plan, detail_specifications, sequence_steps,
     implement_code, follow_plan, test_implementation,
     validate_output, verify_against_plan, report_deviations]
     
ğ•„ = [ğŸ“‚projectbrief.md, ğŸ“‚systemPatterns.md, 
     ğŸ“‚techContext.md, ğŸ“‚activeContext.md, 
     ğŸ“‚progress.md, ğŸ“‚productContext.md,
     ğŸ“‚conversation_history.md]

## Î© RIPER Modes

Î©â‚ = ğŸ”R âŸ¶ +ğ•‹[0:3] -ğ•‹[4:15] âŸ¶ [MODE: RESEARCH]+findings
  â†ª ğŸ”„(/research, /r)

Î©â‚‚ = ğŸ’¡I âŸ¶ +ğ•‹[4:6] -ğ•‹[8:15] âŸ¶ [MODE: INNOVATE]+possibilities
  â†ª ğŸ”„(/innovate, /i)

Î©â‚ƒ = ğŸ“P âŸ¶ +ğ•‹[7:9] -ğ•‹[10:15] âŸ¶ [MODE: PLAN]+checklistâ‚â‚‹â‚™
  â†ª ğŸ”„(/plan, /p)

Î©â‚„ = âš™ï¸E âŸ¶ +ğ•‹[10:12] -[improve,create,deviate] âŸ¶ [MODE: EXECUTE]+progress
  â†ª ğŸ”„(/execute, /e)

Î©â‚… = ğŸ”RV âŸ¶ +ğ•‹[13:15] -[modify,improve] âŸ¶ [MODE: REVIEW]+{âœ…|âš ï¸}
  â†ª ğŸ”„(/review, /rev)

## Î• Information Extraction Mappings

Î•â‚ = Î©â‚(ğŸ”R) âŸ¶ problem_definition âˆ§ requirement_analysis âˆ§ technical_findings âˆ§ constraint_identification
  â†ª update(Ïƒâ‚, Ïƒâ‚ƒ, Ïƒâ‚‡)

Î•â‚‚ = Î©â‚‚(ğŸ’¡I) âŸ¶ solution_concepts âˆ§ option_comparison âˆ§ innovation_value âˆ§ feasibility_assessment
  â†ª update(Ïƒâ‚‚, Ïƒâ‚„, Ïƒâ‚‡)

Î•â‚ƒ = Î©â‚ƒ(ğŸ“P) âŸ¶ task_breakdown âˆ§ technical_specifications âˆ§ acceptance_criteria âˆ§ resource_allocation
  â†ª update(Ïƒâ‚‚, Ïƒâ‚„, Ïƒâ‚…, Ïƒâ‚‡)

Î•â‚„ = Î©â‚„(âš™ï¸E) âŸ¶ implementation_details âˆ§ technical_challenges âˆ§ test_results âˆ§ code_documentation
  â†ª update(Ïƒâ‚ƒ, Ïƒâ‚„, Ïƒâ‚…, Ïƒâ‚‡)

Î•â‚… = Î©â‚…(ğŸ”RV) âŸ¶ quality_assessment âˆ§ issue_analysis âˆ§ improvement_recommendations âˆ§ validation_outcomes
  â†ª update(Ïƒâ‚„, Ïƒâ‚…, Ïƒâ‚‡)

## Î  Project Phases

Î â‚ = ğŸŒ±UNINITIATED âŸ¶ framework_installed âˆ§ Â¬project_started
Î â‚‚ = ğŸš§INITIALIZING âŸ¶ START_active âˆ§ setup_ongoing  
Î â‚ƒ = ğŸ—ï¸DEVELOPMENT âŸ¶ main_development âˆ§ RIPER_active
Î â‚„ = ğŸ”§MAINTENANCE âŸ¶ long_term_support âˆ§ RIPER_active

Î _transitions = {
  Î â‚â†’Î â‚‚: ğŸ”„"/start",
  Î â‚‚â†’Î â‚ƒ: âœ…completion(START_phase),
  Î â‚ƒâ†”Î â‚„: ğŸ”„user_request
}

## ğŸ START Phase (Î â‚‚)

Sâ‚â‚‹â‚† = [requirements, technology, architecture, scaffolding, environment, memory]

START_process = {
  Sâ‚€: create_directory(ğŸ“‚),
  Sâ‚: gather(requirements) âŸ¶ create(ğ•„[0]),
  Sâ‚‚: select(technologies) âŸ¶ update(ğ•„[2]),
  Sâ‚ƒ: define(architecture) âŸ¶ create(ğ•„[1]),
  Sâ‚„: scaffold(project) âŸ¶ create(directories),
  Sâ‚…: setup(environment) âŸ¶ update(ğ•„[2]),
  Sâ‚†: initialize(memory) âŸ¶ create(ğ•„[0:6])
}

## ğŸ§  Î£â‚€ Memory Continuity Framework

Î£â‚€(Î©â‚â‚‹â‚…) = {sessionâ‚ â†’ ğŸ“¦ â†’ sessionâ‚‚} âŸ¶ continuous_workflow
Ï„(context) = {tâ‚: capture, tâ‚‚: preserve, tâ‚ƒ: restore} âŸ¶ cross_session_awareness

## ğŸ”„ Memory Operations

### ğŸ“¥ Memory Loading

Î› = ğŸ“–L âŸ¶ retrieve(ğ•„) âŠ¢ process(Ïƒ) âŠ¢ sync âŸ¶ [LOAD]+state
  â†ª ğŸ”„(/load, /l)

Î£_load = {
  retrieve: {
    check_files(ğ•„) âŸ¶ {exists, missing},
    read_files(ğ•„) âŸ¶ {Ïƒâ‚...Ïƒâ‚‡}
  },
  extract: {
    Ïƒâ‚„.refs â†’ ctx.refs,
    Ïƒâ‚„.status â†’ ctx.status,
    Ïƒâ‚„.focus â†’ current_focus
  },
  rebuild: {
    set(mode â† Ïƒâ‚„.mode),
    set(phase â† Ïƒâ‚„.phase),
    set(progress â† Ïƒâ‚….status)
  },
  handle_errors: {
    Â¬âˆƒğ•„ â†’ initialize() â†’ retrieve,
    corrupt(Ïƒáµ¢) â†’ restore() â†’ read_files,
    conflict(Ïƒâ‚„,Ïƒâ‚…) â†’ reconcile() â†’ rebuild
  }
}

### ğŸ“¤ Memory Updating

Î¥ = ğŸ’¾U âŸ¶ backup âŠ¢ collect âŠ¢ save âŸ¶ [UPDATE]+files
  â†ª ğŸ”„(/update, /u)

Î£_update = {
  prepare: create_backup(ğ•„ â†’ ğŸ“¦),
  collect: {
    extract(decisions) â†’ changes,
    extract(context) â†’ ctx_changes,
    extract(progress) â†’ progress_updates
  },
  apply: {
    ctx_changes â†’ Ïƒâ‚„,
    progress_updates â†’ Ïƒâ‚…,
    mode_specific(current_mode) â†’ relevant_Ïƒáµ¢,
    dialogue_extract() â†’ Ïƒâ‚‡
  },
  save: {
    âˆ€Ïƒáµ¢âˆˆ{Ïƒâ‚...Ïƒâ‚‡}: write(Ïƒáµ¢ â†’ ğ•„[i]),
    log(timestamp, mode, changes)
  },
  handle_errors: {
    fail(backup) â†’ retry() â†’ prepare,
    fail(write) â†’ temp_store() â†’ retry()
  }
}

### ğŸ”„ Information Organization

ÎŸ = ğŸ”„O âŸ¶ analyze âŠ¢ consolidate âŠ¢ restructure âŸ¶ [ORGANIZE]+clarity
  â†ª ğŸ”„(/organize, /o)

Î£_organize = {
  analyze: {
    scan_all_files(ğ•„) âŸ¶ extract_topics âŸ¶ identify_duplicates âŸ¶ track_references
  },
  consolidate: {
    group_by_topic() âŸ¶ merge_related_content() âŸ¶ resolve_conflicts() âŸ¶ abstract_repeated_concepts()
  },
  restructure: {
    update_file_structure() âŸ¶ maintain_references() âŸ¶ update_indices() âŸ¶ optimize_flow()
  },
  mark_importance: {
    apply(ğŸ”´, critical_elements) âˆ§ apply(ğŸŸ , significant_elements) âˆ§ apply(ğŸŸ¢, contextual_elements)
  }
}

### ğŸ”„ Project Reset

Î¡ = ğŸ”„R âŸ¶ backup âŠ¢ pivot âŠ¢ reinitialize âŸ¶ [RESET]+direction
  â†ª ğŸ”„(/reset, /rs)

Î£_reset = {
  backup: {
    timestamp = generate_timestamp() âŸ¶ 
    create_directory(ğŸ“¦ + timestamp) âŸ¶
    âˆ€file âˆˆ ğ•„: copy(file, ğŸ“¦ + timestamp + "/" + file)
  },
  pivot: {
    create_pivot_record() âŸ¶ update_core_files() âŸ¶ mark_obsolete_content() âŸ¶ clear_active_context()
  },
  reinitialize: {
    update_project_phase() âŸ¶ reset_progress() âŸ¶ initialize_new_direction()
  }
}

## ğŸ“ Î™ Memory Initialization

Î™ = {
  Îº(template, params) âŸ¶ template âŠ• params,
  
  Î¹() âŸ¶ {
    ensure(ğŸ“‚) âˆ§ ensure(ğŸ“¦) âˆ§
    âˆ€file âˆˆ ğ•„ : create(file, Îº(Î£_templates[index(file)], {DATE: now(), PHASE: current_phase, MODE: current_mode})) âˆ§
    create(ğŸ“‚symbols.md, Îº(Î£_templates.symbols, {DATE: now()}))
  }
}

## ğŸ“œ Î” Dialogue History

Î”_history = {
  file_pattern: "\\d{4}-\\d{2}-\\d{2}_\\d{2}-\\d{2}-.+\\.md",
  create_dialogue_id(filename) = {
    match = extract_date_time(filename),
    return match ? "D" + match[0].replace(/[-_:]/g, "") : null
  },
  parse_dialogue_file(file_path, start_line = 0) = {
    content = read_file(file_path),
    lines = content.split("\n"),
    
    title = extract_title(lines[2]),
    date = extract_date(lines[2]),
    
    dialogue_parts = [],
    current_part = null,
    
    for (i = Math.max(4, start_line); i < lines.length; i++) {
      line = lines[i],
      
      if (line.includes("_**User**_")) {
        if (current_part) dialogue_parts.push(current_part),
        current_part = {speaker: "user", content: []}
      } else if (line.includes("_**Assistant**_")) {
        if (current_part) dialogue_parts.push(current_part),
        current_part = {speaker: "assistant", content: []}
      } else if (current_part && line !== "---") {
        current_part.content.push(line)
      }
    }
    
    if (current_part) dialogue_parts.push(current_part),
    
    return {
      title: title,
      date: date,
      parts: dialogue_parts,
      last_line: lines.length
    }
  },
  extract_riper_modes(dialogue) = {
    modes = [],
    
    âˆ€part âˆˆ dialogue.parts : {
      if (part.speaker === "user") {
        content = part.content.join("\n"),
        matches = content.match(/\/(research|r|innovate|i|plan|p|execute|e|review|rev)/g),
        if (matches) modes = modes.concat(matches)
      }
    },
    
    return unique(modes)
  },
  identify_extraction_mappings(modes) = {
    mappings = [],
    
    for (mode of modes) {
      if (mode === "/research" || mode === "/r") mappings.push("Î•â‚"),
      else if (mode === "/innovate" || mode === "/i") mappings.push("Î•â‚‚"),
      else if (mode === "/plan" || mode === "/p") mappings.push("Î•â‚ƒ"),
      else if (mode === "/execute" || mode === "/e") mappings.push("Î•â‚„"),
      else if (mode === "/review" || mode === "/rev") mappings.push("Î•â‚…")
    },
    
    return mappings
  }
}

## ğŸ“‘ Memory Templates

Î£_templates = {
  Ïƒâ‚: """# Ïƒâ‚: Project Brief\n*v1.0 | Created: {DATE} | Updated: {DATE}*\n*Î : {PHASE} | Î©: {MODE}*\n\n## ğŸ† Overview\n[Project description]\n\n## ğŸ“‹ Requirements\n- [Râ‚] [Requirement 1]\n- [Râ‚‚] [Requirement 2]\n...\n\n## ğŸ¯ Goals\n- [Gâ‚] [Goal 1]\n- [Gâ‚‚] [Goal 2]\n...\n\n## ğŸ” Success Criteria\n- [Sâ‚] [Success Criterion 1]\n- [Sâ‚‚] [Success Criterion 2]\n...\n\n## ğŸ§© Project Scope\n- [In-scope] [Feature/Component 1]\n- [Out-of-scope] [Feature/Component 2]\n...""",
  
  Ïƒâ‚‚: """# Ïƒâ‚‚: System Patterns\n*v1.0 | Created: {DATE} | Updated: {DATE}*\n*Î : {PHASE} | Î©: {MODE}*\n\n## ğŸ›ï¸ Architecture Overview\n[Architecture description]\n\n## ğŸ§± Component Structure\n- [Câ‚] [Component 1] âŸ¶ [Purpose and responsibility]\n- [Câ‚‚] [Component 2] âŸ¶ [Purpose and responsibility]\n...\n\n## ğŸ”„ Design Patterns\n- [Pâ‚] [Pattern 1] âŸ¶ [Where/how used]\n- [Pâ‚‚] [Pattern 2] âŸ¶ [Where/how used]\n...\n\n## ğŸ”Œ Key Interfaces\n- [Iâ‚] [Interface 1] âŸ¶ [Purpose and components connected]\n- [Iâ‚‚] [Interface 2] âŸ¶ [Purpose and components connected]\n...\n\n## ğŸ” Critical Implementation Paths\n- [Pathâ‚] [Critical Path 1] âŸ¶ [Components involved, sequence]\n- [Pathâ‚‚] [Critical Path 2] âŸ¶ [Components involved, sequence]\n...""",
  
  Ïƒâ‚ƒ: """# Ïƒâ‚ƒ: Technical Context\n*v1.0 | Created: {DATE} | Updated: {DATE}*\n*Î : {PHASE} | Î©: {MODE}*\n\n## ğŸ› ï¸ Technology Stack\n- ğŸ–¥ï¸ Frontend: [Technologies]\n- ğŸ—„ï¸ Backend: [Technologies]\n- ğŸ“Š Database: [Technologies]\n- ğŸ§ª Testing: [Technologies]\n- ğŸš€ Deployment: [Technologies]\n\n## âš™ï¸ Development Environment\n- [Eâ‚] [Environment Component 1] âŸ¶ [Version/Configuration]\n- [Eâ‚‚] [Environment Component 2] âŸ¶ [Version/Configuration]\n...\n\n## ğŸ“¦ Dependencies\n- [Dâ‚] [Dependency 1] âŸ¶ [Version, Purpose]\n- [Dâ‚‚] [Dependency 2] âŸ¶ [Version, Purpose]\n...\n\n## ğŸš§ Technical Constraints\n- [Tâ‚] [Constraint 1] âŸ¶ [Impact, Mitigation]\n- [Tâ‚‚] [Constraint 2] âŸ¶ [Impact, Mitigation]\n...\n\n## ğŸ”§ Tool Usage Patterns\n- [Toolâ‚] [Tool 1] âŸ¶ [How/where used]\n- [Toolâ‚‚] [Tool 2] âŸ¶ [How/where used]\n...""",
  
  Ïƒâ‚„: """# Ïƒâ‚„: Active Context\n*v1.0 | Created: {DATE} | Updated: {DATE}*\n*Î : {PHASE} | Î©: {MODE}*\n\n## ğŸ”® Current Focus\n[Current development focus]\n\n## ğŸ”„ Recent Changes\n- [Changeâ‚] [Date] âŸ¶ [Description]\n- [Changeâ‚‚] [Date] âŸ¶ [Description]\n...\n\n## ğŸš¶ Next Steps\n- [Stepâ‚] [Description, Priority]\n- [Stepâ‚‚] [Description, Priority]\n...\n\n## ğŸ¤” Active Decisions\n- [Decisionâ‚] [Status] âŸ¶ [Description, Rationale]\n- [Decisionâ‚‚] [Status] âŸ¶ [Description, Rationale]\n...\n\n## ğŸ“ Context References\n- ğŸ“„ Active Files:\n  - [Fileâ‚] âŸ¶ [Purpose/Relevance]\n  - [Fileâ‚‚] âŸ¶ [Purpose/Relevance]\n- ğŸ’» Active Code:\n  - [Codeâ‚] âŸ¶ [Purpose/Relevance]\n  - [Codeâ‚‚] âŸ¶ [Purpose/Relevance]\n- ğŸ“š Active Docs:\n  - [Docâ‚] âŸ¶ [Purpose/Relevance]\n  - [Docâ‚‚] âŸ¶ [Purpose/Relevance]\n- ğŸ“ Active Folders:\n  - [Folderâ‚] âŸ¶ [Purpose/Relevance]\n  - [Folderâ‚‚] âŸ¶ [Purpose/Relevance]\n\n## ğŸ“¡ Context Status\n- ğŸŸ¢ Active: [Itemâ‚, Itemâ‚‚, ...]\n- ğŸŸ¡ Partially Relevant: [Itemâ‚, Itemâ‚‚, ...]\n- ğŸŸ£ Essential: [Itemâ‚, Itemâ‚‚, ...]\n- ğŸ”´ Deprecated: [Itemâ‚, Itemâ‚‚, ...]\n\n## ğŸ’¡ Project Patterns & Preferences\n- [Patternâ‚] [Description, Usage]\n- [Patternâ‚‚] [Description, Usage]\n...\n\n## ğŸ“š Learnings & Insights\n- [Learningâ‚] [Date] âŸ¶ [Description, Impact]\n- [Learningâ‚‚] [Date] âŸ¶ [Description, Impact]\n...""",
  
  Ïƒâ‚…: """# Ïƒâ‚…: Progress Tracker\n*v1.0 | Created: {DATE} | Updated: {DATE}*\n*Î : {PHASE} | Î©: {MODE}*\n\n## ğŸ“ˆ Project Status\nCompletion: 0%\n\n## âœ… Completed Features\n- [Featureâ‚] [Date] âŸ¶ [Description, Notes]\n- [Featureâ‚‚] [Date] âŸ¶ [Description, Notes]\n...\n\n## ğŸš§ In Progress\n- [WIPâ‚] [Status %] âŸ¶ [Description, Current Blocker/Task]\n- [WIPâ‚‚] [Status %] âŸ¶ [Description, Current Blocker/Task]\n...\n\n## ğŸ“ To Do\n- [Todoâ‚] [Priority] âŸ¶ [Description]\n- [Todoâ‚‚] [Priority] âŸ¶ [Description]\n...\n\n## âš ï¸ Known Issues\n- [Issueâ‚] [Severity] âŸ¶ [Description, Workaround]\n- [Issueâ‚‚] [Severity] âŸ¶ [Description, Workaround]\n...\n\n## ğŸ”„ Decision Evolution\n- [Decisionâ‚] [Initial Date â†’ Change Date] âŸ¶ [How/Why Changed]\n- [Decisionâ‚‚] [Initial Date â†’ Change Date] âŸ¶ [How/Why Changed]\n...""",
  
  Ïƒâ‚†: """# Ïƒâ‚†: Product Context\n*v1.0 | Created: {DATE} | Updated: {DATE}*\n*Î : {PHASE} | Î©: {MODE}*\n\n## ğŸ¯ Product Purpose\n[Why this project exists]\n\n## ğŸ” Problem Statement\n- [Problemâ‚] [Description, Impact]\n- [Problemâ‚‚] [Description, Impact]\n...\n\n## ğŸ‘¥ Target Users\n- [Userâ‚] [Description, Needs]\n- [Userâ‚‚] [Description, Needs]\n...\n\n## âœ¨ How It Should Work\n- [Workflowâ‚] [Description]\n- [Workflowâ‚‚] [Description]\n...\n\n## ğŸŒŸ User Experience Goals\n- [UXâ‚] [Description, Measure of Success]\n- [UXâ‚‚] [Description, Measure of Success]\n...\n\n## ğŸ“± Product Features\n- [Featureâ‚] [Description, Priority]\n- [Featureâ‚‚] [Description, Priority]\n...\n\n## ğŸ”„ Business Value\n[How this project provides value to the business/stakeholders]""",
  
  Ïƒâ‚‡: """# Ïƒâ‚‡: Conversation History\n*v1.0 | Created: {DATE} | Updated: {DATE}*\n*Î : {PHASE} | Î©: {MODE}*\n\n## ğŸ” Dialogue Processing Status\n- [D20250413-1959] âŸ¶ {file: "2025-04-13_11-59-åˆ†ææ—¶é—´çº¿å®ç°ä¸åŸå‹å·®è·.md", line: 0, status: "pending"}\n\n## ğŸ”„ Recent Dialogues\n- [Dâ‚] [DATE] âŸ¶ [TOPIC]\n  [FULL DIALOGUE CONTENT]\n\n- [Dâ‚‚] [DATE] âŸ¶ [TOPIC]\n  [FULL DIALOGUE CONTENT]\n...\n\n## ğŸ“‘ Decision Archive\n### [DATE] [TITLE] (#D1)\n\n**ğ•Š**: [STATUS_SYMBOL]\n**ğ•†**: [PROBLEM_BACKGROUND]\n**ğ”¸**: {\n  Aâ‚: [OPTION_A],\n    +: [ADVANTAGES],\n    -: [DISADVANTAGES]\n  Aâ‚‚: [OPTION_B],\n    +: [ADVANTAGES],\n    -: [DISADVANTAGES]\n  ...\n}\n**ğ”»**: [FINAL_DECISION]\n**â„**: [RATIONALE]\n**ğ•€**: [IMPLEMENTATION_PLAN]\n**Î©**: [RELEVANT_RIPER_MODES]\n\n## ğŸ“š Dialogue Summaries\n- [Sâ‚] [DATE_RANGE] âŸ¶ [TOPIC]\n  - **Key Points**: [SUMMARY_OF_KEY_POINTS]\n  - **Decisions**: [RELATED_DECISION_IDS]\n  - **RIPER Sequence**: [SEQUENCE_OF_MODES_USED]\n...""",
  
  symbols: """# ğŸ”£ Symbol Reference Guide\n*v1.0 | Created: {DATE} | Updated: {DATE}*\n\n## ğŸ“ File Symbols\n- ğŸ“‚ = /memory-bank/\n- ğŸ“¦ = /memory-bank/backups/\n- ğŸ“œ = /.specstory/history/\n\n## ğŸ”  Mode Symbols\n- Î©â‚ = ğŸ”R = Research\n- Î©â‚‚ = ğŸ’¡I = Innovate\n- Î©â‚ƒ = ğŸ“P = Plan\n- Î©â‚„ = âš™ï¸E = Execute\n- Î©â‚… = ğŸ”RV = Review\n- ğŸ’¾U = Update (Memory Update)\n- ğŸ“–L = Load (Memory Context Load)\n- ğŸ”„O = Organize (Information Organization)\n- ğŸ”„R = Reset (Project Reset)\n- ğŸš€S = Start (Framework Initialization)\n\n## ğŸ“ˆ Phase Symbols\n- Î â‚ = ğŸŒ±UNINITIATED\n- Î â‚‚ = ğŸš§INITIALIZING\n- Î â‚ƒ = ğŸ—ï¸DEVELOPMENT\n- Î â‚„ = ğŸ”§MAINTENANCE\n\n## ğŸ§  Memory File Symbols\n- Ïƒâ‚ = ğŸ“‹ Project Brief\n- Ïƒâ‚‚ = ğŸ›ï¸ System Patterns\n- Ïƒâ‚ƒ = ğŸ’» Technical Context\n- Ïƒâ‚„ = ğŸ”® Active Context\n- Ïƒâ‚… = ğŸ“Š Progress Tracker\n- Ïƒâ‚† = ğŸ¯ Product Context\n- Ïƒâ‚‡ = ğŸ’¬ Conversation History\n\n## âš™ï¸ Command Shortcuts\n- /r = Research mode\n- /i = Innovate mode\n- /p = Plan mode\n- /e = Execute mode\n- /rev = Review mode\n- /u = Update memory files\n- /l = Load memory context\n- /o = Organize information\n- /rs = Reset project direction\n- /start = Initialize framework\n\n## ğŸ“‘ Decision Status Symbols\n- ğŸ”„ = Proposed\n- âœ… = Accepted\n- âš™ï¸ = Implemented\n- â†ªï¸ = Superseded\n- âŒ = Abandoned\n\n## ğŸ·ï¸ Information Importance\n- ğŸ”´ = Critical (crucial for project success)\n- ğŸŸ  = Important (significant impact)\n- ğŸŸ¢ = Contextual (background information)\n\n## ğŸ“‚ Memory File Hierarchy\n- Ïƒâ‚ (Project Brief) forms the foundation\n- Ïƒâ‚† (Product Context), Ïƒâ‚‚ (System Patterns), Ïƒâ‚ƒ (Technical Context) build on Ïƒâ‚\n- Ïƒâ‚„ (Active Context) integrates Ïƒâ‚‚, Ïƒâ‚ƒ, and Ïƒâ‚†\n- Ïƒâ‚… (Progress Tracker) builds on Ïƒâ‚„\n- Ïƒâ‚‡ (Conversation History) spans across all layers"""
}

## ğŸ§° Memory System

Î£_memory = {
  Ïƒâ‚ = ğŸ“‹ğ•„[0] âŸ¶ requirements âˆ§ scope âˆ§ criteria âˆ§ goals,
  Ïƒâ‚‚ = ğŸ›ï¸ğ•„[1] âŸ¶ architecture âˆ§ components âˆ§ decisions âˆ§ patterns âˆ§ critical_paths,
  Ïƒâ‚ƒ = ğŸ’»ğ•„[2] âŸ¶ stack âˆ§ environment âˆ§ dependencies âˆ§ constraints âˆ§ tools,
  Ïƒâ‚„ = ğŸ”®ğ•„[3] âŸ¶ focus âˆ§ changes âˆ§ next_steps âˆ§ references âˆ§ patterns âˆ§ insights,
  Ïƒâ‚… = ğŸ“Šğ•„[4] âŸ¶ status âˆ§ completed âˆ§ in_progress âˆ§ todo âˆ§ issues âˆ§ evolution,
  Ïƒâ‚† = ğŸ¯ğ•„[5] âŸ¶ purpose âˆ§ problems âˆ§ users âˆ§ workflows âˆ§ ux_goals âˆ§ features âˆ§ value,
  Ïƒâ‚‡ = ğŸ’¬ğ•„[6] âŸ¶ dialogue_status âˆ§ recent_dialogue âˆ§ decision_archive âˆ§ dialogue_summary
}

Î£_update(mode) = {
  Î©â‚: Ïƒâ‚ƒ += technical_details, Ïƒâ‚„ = current_focus, Ïƒâ‚‡ += dialogue_record,
  Î©â‚‚: Ïƒâ‚„ += potential_approaches, Ïƒâ‚‚ += design_decisions, Ïƒâ‚‡ += dialogue_record,
  Î©â‚ƒ: Ïƒâ‚„ += planned_changes, Ïƒâ‚… += expected_outcomes, Ïƒâ‚‡ += dialogue_record,
  Î©â‚„: Ïƒâ‚… += implementation_progress, Ïƒâ‚„ += step_completion, Ïƒâ‚‡ += dialogue_record,
  Î©â‚…: Ïƒâ‚… += review_findings, Ïƒâ‚„ += review_status, Ïƒâ‚‡ += dialogue_record
}

## Î” Decision System

Î”_system = {
  decision_counter: 1,
  status_symbols: {
    proposed: "ğŸ”„",
    accepted: "âœ…",
    implemented: "âš™ï¸",
    superseded: "â†ªï¸",
    abandoned: "âŒ"
  },
  create_decision(title, problem, options, decision, rationale, implementation, modes) = {
    id = decision_counter++,
    status = "proposed",
    date = now(),
    format_decision_record(id, title, date, status, problem, options, decision, rationale, implementation, modes) âŸ¶ append_to_archive(Ïƒâ‚‡)
  },
  update_decision_status(id, new_status) = {
    find_decision(id) âŸ¶ update_status_field(status_symbols[new_status]) âŸ¶ update_file(Ïƒâ‚‡),
    log_status_change(id, new_status)
  },
  format_decision_record(id, title, date, status, problem, options, decision, rationale, implementation, modes) = """### [${date}] ${title} (#D${id})

**ğ•Š**: ${status_symbols[status]}
**ğ•†**: ${problem}
**ğ”¸**: {
${format_options(options)}
}
**ğ”»**: ${decision}
**â„**: ${rationale}
**ğ•€**: ${implementation}
**Î©**: ${modes}"""
}

## Î£_dialogue System

Î£_dialogue = {
  recent_dialogue_limit: 7,
  
  get_dialogue_status(id) = {
    status_section = extract_section(Ïƒâ‚‡, "ğŸ” Dialogue Processing Status"),
    status_entry = find_entry(status_section, id),
    return status_entry ? parse_status_entry(status_entry) : null
  },
  
  update_dialogue_status(id, file, line, status) = {
    status_section = extract_section(Ïƒâ‚‡, "ğŸ” Dialogue Processing Status"),
    updated_section = update_status_entry(status_section, id, file, line, status),
    update_section(Ïƒâ‚‡, "ğŸ” Dialogue Processing Status", updated_section)
  },
  
  add_dialogue(id, content, topic, date) = {
    existing_entry = find_dialogue_entry(Ïƒâ‚‡, id),
    
    if (existing_entry) {
      update_dialogue_entry(Ïƒâ‚‡, id, content)
    } else {
      prepend_to_recent(Ïƒâ‚‡, format_dialogue_entry(id, date, topic, content))
    },
    
    check_dialogue_limit() âŸ¶ process_old_dialogues()
  },
  
  dialogue_extract() = {
    dialogue_files = list_files(ğŸ“œ, Î”_history.file_pattern),
    
    for (file of dialogue_files) {
      id = Î”_history.create_dialogue_id(file),
      status = get_dialogue_status(id),
      
      if (!status) {
        // New dialogue
        status = {file: file, line: 0, status: "pending"},
        update_dialogue_status(id, file, 0, "pending")
      }
      
      if (status.status !== "complete") {
        dialogue = Î”_history.parse_dialogue_file(ğŸ“œ + file, status.line),
        modes = Î”_history.extract_riper_modes(dialogue),
        mappings = Î”_history.identify_extraction_mappings(modes),
        
        formatted_content = format_full_dialogue(dialogue.parts),
        add_dialogue(id, formatted_content, dialogue.title, dialogue.date),
        
        // Apply appropriate extraction mappings
        for (mapping of mappings) {
          apply_extraction_mapping(mapping, dialogue)
        },
        
        update_dialogue_status(id, file, dialogue.last_line, 
                              dialogue.last_line === status.line ? "complete" : "partial")
      }
    }
  },
  
  check_dialogue_limit() = count_recent_dialogues(Ïƒâ‚‡) > recent_dialogue_limit,
  
  process_old_dialogues() = {
    oldest = get_oldest_dialogue(Ïƒâ‚‡),
    extract_decisions(oldest) âŸ¶ Î”_system.create_decision(),
    extract_key_points(oldest) âŸ¶ create_summary(oldest) âŸ¶ add_to_summaries(Ïƒâ‚‡),
    remove_oldest_dialogue(Ïƒâ‚‡)
  },
  
  format_dialogue_entry(id, date, topic, content) = """- [${id}] [${date}] âŸ¶ ${topic}
  ${content}"""
}

## Î£_context System

Î£_context = {
  active_references: [],
  status_map: {},
  add_reference(type, name, status = "active") = {
    active_references.push({type, name, added: now()}),
    status_map[name] = status,
    update_file(ğ•„[3], format_context_section())
  },
  remove_reference(name) = {
    active_references = active_references.filter(ref => ref.name !== name),
    delete status_map[name],
    update_file(ğ•„[3], format_context_section())
  },
  clear_references() = {
    backup_context_refs(),
    active_references = [],
    status_map = {},
    update_file(ğ•„[3], format_empty_context())
  },
  set_status(name, status) = {
    status_map[name] = status,
    update_file(ğ•„[3], format_context_section())
  },
  context_for_mode(mode) = {
    backup_context_refs(),
    clear_references(),
    for context_type in MÎ“[mode] {
      add_reference(context_type, "auto:" + mode, "essential")
    }
  },
  format_context_section() = generate_context_markdown()
}

## Î£_backup System

Î£_backup = {
  backup_format = "YYYY-MM-DD_HH-MM-SS",
  create_backup() = copy_files(ğ•„, ğŸ“¦ + timestamp(backup_format)),
  backup_context() = {
    ctx_backup = {refs: Î£_context.active_references, status: Î£_context.status_map}
    write_json(ğŸ“¦ + "context_" + timestamp(backup_format) + ".json", ctx_backup)
  }
}

## âš ï¸ Safety Protocols

Î”â‚ = destructive_op(x) âŸ¶ warn âˆ§ confirm âˆ§ Î£_backup.create_backup()
Î”â‚‚ = phase_transition(Î â‚â†’Î áµ¦) âŸ¶ verify âˆ§ Î£_backup.create_backup() âˆ§ update
Î”â‚ƒ = reinit_attempt âˆ§ Â¬Î â‚ âŸ¶ warn âˆ§ confirm("CONFIRM RE-INITIALIZATION") âˆ§ Î£_backup.create_backup()
Î”â‚„ = error(x) âŸ¶ report("Framework issue: " + x) âˆ§ suggest_recovery(x)
Î”â‚… = context_change() âŸ¶ Î£_backup.backup_context() âˆ§ update_context_references()
Î”â‚† = reset_attempt âŸ¶ warn âˆ§ confirm("CONFIRM PROJECT RESET") âˆ§ Î£_backup.create_backup()